---
title: 应用系统集成——访问控制
date: 2020-08-23 18:49:45
tags:
---

## 1. 文档说明

本文档描述了应用系统与统一身份认证管理平台进行单点登录集成的集成方式与集成接口。

注意：**如果没特殊说明，应用系统都以OAuth方式与IAM进行单点登录集成，OAuth为通用协议，如果看文档仍存在异议，可优先查阅其他资料。REST认证服务接口章节无需查看。**

<!-- more -->

---

## 2. OAuth认证服务接口

### 2.1. 认证流程

---

### 2.2. 认证接口

#### 2.2.1. 认证接口

**简要描述:**

- 接口名：`authorize`
- 获取授权码的rest接口
- 处理逻辑：
  1. 判断参数
  2. 验证client_id是否有效
  3. 认证链校验用户名密码
  4. 根据以上判断、验证及认证结果返回JSON数据

**接口版本:**

|版本号|制定人|制定日期|修订日期|
|:----    |:---|:----- |-----   |
|-|-|-|-|

**请求URL:**

- <http://认证接口地址/idp/oauth2/authorize>

**请求方式:**

- GET

**请求头:**

|参数名|是否必须|类型|说明|
|:----    |:---|:----- |-----   |
|Content-Type |是  |string |请求类型： application/json   |

**请求参数:**

|参数名|是否必须|类型|说明|
|:----    |:---|:----- |-----   |
|client_id|是|String|应用标识。客户端应用注册ID
|redirect_uri|是|String|跳转地址。处理认证中心返回的授权code值
|response_type|是|String|响应类型。固定值：code
|state|是|String|任意值。用于保持请求和回调的状态，在回调时，会在Query Parameter中回传该参数。开发者可以用这个参数验证请求有效性，也可以记录用户请求授权页当前的位置。这个参数可用于防止跨站请求伪造（CSRF）攻击

**返回示例:**

**正确时返回:**

```json
{  
 "code": "ese3edf4d5f4d24g55634dfe",  
}

```

**错误时返回:**

参数不完整及错误时：

```json
client_id缺失时:
{  
 "errcode": "1001",
 "msg": "缺少参数client_id"  
}
redirect_uri缺失时：
{  
 "errcode": "1016",
 "msg": "缺少参数redirect_url"  
}
client_secret缺失时：
{  
 "errcode": "1008",
 "msg": "缺少参数client_secret"  
}
client_id无效时：
{  
 "errcode": "1005",
 "msg": "参数client_id非法"  
}

```

**返回参数说明：**

|参数名|类型|说明|
|:-----  |:-----|-----                           |
errcode |  String | 错误代码
msg |  String | 提示信息
code | String | 认证成功返回的code

---

#### 2.2.2. 获取授权接口(authorization_code模式)

#### 2.2.3. 获取用户信息接口

### 2.3. 应用集成demo

---

## 3. REST认证服务接口

### 3.1. 认证及单点登录流程

#### 3.1.1. 应用单点登录流程

#### 3.1.2. 应用认证流程

### 3.2. 认证接口

#### 3.2.1. 验证票据接口

#### 3.2.2. 获取用户信息接口

### 3.3. 认证辅助接口

#### 3.3.1. 认证中心获取票据接口

#### 3.3.2. 认证中心设置票据接口

### 3.4. 应用退出流程

### 3.5. 应用集成demo

---

## 4. 接口调用注意事项

### 4.1. urlEncode编码

### 4.2. HTTPS安全协议
