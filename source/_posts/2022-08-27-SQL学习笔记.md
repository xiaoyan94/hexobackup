---
title: SQL学习笔记
date: 2022-08-27 09:26:20
tags: [SQL,数据库]
---

## SQL基础

### round函数：四舍五入保留小数

保留一位小数

```SQL
select
  gender,
  university,
  count(1) user_num,
  round(avg(active_days_within_30),1) avg_active_day,
  round(avg(question_cnt),1) avg_question_cnt
from
  user_profile
group by
  gender,
  university
```

### limit关键字：在SQL Server中替代MySQL中的limit关键字

#### TOP

```SQL
SELECT TOP n FROM table
```

TOP `n`:  指定从查询结果集中输出前 n 行，n是介于 0 - 4294967295 之间的整数(只可以在sql server数据库中使用)

eg：`SELECT TOP 5 FROM table1`

查询结果：从table1中拿到前5条数据

#### LIMIT

```SQL
SELECT * FROM table LIMIT n
```

LIMIT `n`: 指定从查询结果集中输出前 n 行。(只可以在Mysql数据库中使用)

eg: `SELECT * FROM table1 LIMIT 10`

查询结果：从table1中拿到前10条数据

```SQL
SELECT * FROM table LIMIT a,b
```

`LIMIT a,b`: a是开始读取的第一条记录的编号(是从0开始计算编号，比如：a=2，则是从第三条开始计算)，b是要查询记录的个数。(只可以在Mysql数据库中使用)

eg: `SELECT * FROM table1 LIMIT 2,5`

查询结果：从table1中拿到第3条开始之后的5条数据 (一共5条数据)

```SQL
SELECT * FROM table LIMIT n OFFSET m
```

`LIMIT n OFFSET m`: n是查询的行数，m是查询的初始位置(是从0开始计算编号，比如：m=2，则是从第三条开始计算)。

eg: `SELECT * FROM table1 LIMIT 2 OFFSET 3`

查询结果:从table1中拿到第4条开始之后的2条数据 (一共2条数据)

#### ROWNUM

```SQL
SELECT * FROM table WHERE ROWNUM <= n
```

`ROWNUM <= n`: 配合where使用，指定从查询结果集中输出前 n 行 (只可以在Oracle数据库中使用)

eg: `SELECT * FROM table1 WHERE ROWNUM <= 20`

查询结果:从table1中拿到前20条数据

总结：**sql server、mysql、orcale数据库用方法是不同的，要区别使用**
